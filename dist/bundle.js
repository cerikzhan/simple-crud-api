(()=>{var e={738:(e,t,r)=>{const n=r(147),o=r(17),s=r(37);function a(e){console.log(`[dotenv][DEBUG] ${e}`)}const i=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,c=/\\n/g,l=/\r\n|\n|\r/;function u(e,t){const r=Boolean(t&&t.debug),n={};return e.toString().split(l).forEach((function(e,t){const o=e.match(i);if(null!=o){const e=o[1];let t=o[2]||"";const r=t.length-1,s='"'===t[0]&&'"'===t[r];"'"===t[0]&&"'"===t[r]||s?(t=t.substring(1,r),s&&(t=t.replace(c,"\n"))):t=t.trim(),n[e]=t}else r&&a(`did not match key and value when parsing line ${t+1}: ${e}`)})),n}e.exports.config=function(e){let t=o.resolve(process.cwd(),".env"),r="utf8",i=!1;var c;e&&(null!=e.path&&(t="~"===(c=e.path)[0]?o.join(s.homedir(),c.slice(1)):c),null!=e.encoding&&(r=e.encoding),null!=e.debug&&(i=!0));try{const e=u(n.readFileSync(t,{encoding:r}),{debug:i});return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?i&&a(`"${t}" is already defined in \`process.env\` and will not be overwritten`):process.env[t]=e[t]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=u},21:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>S,parse:()=>y,stringify:()=>d,v1:()=>w,v3:()=>v,v4:()=>b,v5:()=>P,validate:()=>l,version:()=>C});const n=require("crypto");var o=r.n(n);const s=new Uint8Array(256);let a=s.length;function i(){return a>s.length-16&&(o().randomFillSync(s),a=0),s.slice(a,a+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const d=function(e,t=0){const r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r};let f,p,h=0,g=0;const w=function(e,t,r){let n=t&&r||0;const o=t||new Array(16);let s=(e=e||{}).node||f,a=void 0!==e.clockseq?e.clockseq:p;if(null==s||null==a){const t=e.random||(e.rng||i)();null==s&&(s=f=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==a&&(a=p=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:g+1;const u=c-h+(l-g)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||c>h)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=c,g=l,p=a,c+=122192928e5;const w=(1e4*(268435455&c)+l)%4294967296;o[n++]=w>>>24&255,o[n++]=w>>>16&255,o[n++]=w>>>8&255,o[n++]=255&w;const y=c/4294967296*1e4&268435455;o[n++]=y>>>8&255,o[n++]=255&y,o[n++]=y>>>24&15|16,o[n++]=y>>>16&255,o[n++]=a>>>8|128,o[n++]=255&a;for(let e=0;e<6;++e)o[n+e]=s[e];return t||d(o)},y=function(e){if(!l(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function m(e,t,r){function n(e,n,o,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,o){s=s||0;for(let e=0;e<16;++e)o[s+e]=a[e];return o}return d(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const v=m("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()})),b=function(e,t,r){const n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)},P=m("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()})),S="00000000-0000-0000-0000-000000000000",C=function(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},356:(e,t,r)=>{const{v4:n}=r(21),{persons:o}=r(471),{CustomError:s}=r(658);e.exports={Controller:class{async getPersons(){return new Promise((e=>e({statusCode:200,body:o})))}async getPersonById(e){return new Promise(((t,r)=>{let n=o.find((t=>t.id===e));n?t({statusCode:200,body:n}):r(new s(404,`Person with id ${e} not found`))}))}async createPerson(e){return new Promise(((t,r)=>{e.name&&e.age&&e.hobbies?.length||r(new s(400,"All fields required"));const a={id:n(),name:e.name,age:e.age,hobbies:e.hobbies};o.push(a),t({statusCode:201,body:a})}))}async updatePerson(e){return new Promise(((t,r)=>{const n=o.findIndex((t=>t.id===e.id));-1===n&&r(new s(404,`${personId} not found`)),e.name&&e.age&&e.hobbies?.length||r(new s(400,"Not correct data")),o.splice(n,1,e),t({statusCode:200,body:e})}))}async deletePerson(e){return new Promise(((t,r)=>{const n=o.findIndex((t=>t.id===e));-1===n&&r(new s(404,`Person with id ${e} not found`)),o.splice(n,1),t({statusCode:204,body:{message:"Person deleted successfully"}})}))}}}},471:e=>{e.exports={persons:[]}},658:e=>{class t extends Error{constructor(e,t){super(t),this.name="CustomError",this.statusCode=e}}e.exports={CustomError:t}},138:(e,t,r)=>{const n=r(685),{Service:o}=r(948),{getRequestData:s}=r(555),{CustomError:a}=r(658);e.exports={main:function(){const e=n.createServer((async(e,t)=>{let r,n;try{const i=new o(e.url);switch(e.method){case"GET":r=await i.get();break;case"POST":n=await s(e),r=await i.post(JSON.parse(n));break;case"PUT":n=await s(e),r=await i.put(JSON.parse(n));break;case"DELETE":r=await i.delete();break;default:throw new a(500,"Not valid method")}t.writeHead(r.statusCode,{"Content-Type":"application/json"}),t.end(JSON.stringify(r.body))}catch(e){t.writeHead(e.statusCode,{"Content-Type":"application/json"}),t.end(JSON.stringify({message:e.message}))}})),t=process.env.APP_PORT,r=process.env.APP_HOSTNAME;e.listen(t,r,(()=>{console.log(`server started on: ${r}:${t}`)}))}}},948:(e,t,r)=>{const{Controller:n}=r(356),{urlValidator:o}=r(123),{CustomError:s}=r(658);e.exports={Service:class{constructor(e){this.url=o(e),this.controller=new n}async get(){if(1===this.url.length)return await this.controller.getPersons();if(2===this.url.length)return await this.controller.getPersonById(this.url[1]).catch((e=>{throw e}));throw new s(500,"Something went wrong")}async post(e){if(1!==this.url.length)throw new s(404,"Not valid url");return await this.controller.createPerson(e).catch((e=>{throw e}))}async put(e){if(2!==this.url.length)throw new s(500,"Have not person id");return await this.controller.updatePerson({id:this.url[1],...e}).catch((e=>{throw e}))}async delete(){if(2!==this.url.length)throw new s(500,"Have not person id");return await this.controller.deletePerson(this.url[1]).catch((e=>{throw e}))}}}},123:e=>{e.exports={urlValidator:function(e){const t=e.split("/").slice(1);if(1===t.length&&"person"===t[0])return t;if(2===t.length&&"person"===t[0]&&t[1].match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i))return t;throw new Error("Not valid url")}}},555:e=>{e.exports={getRequestData:function(e){return new Promise(((t,r)=>{try{let r="";e.on("data",(e=>{r+=e.toString()})),e.on("end",(()=>{t(r)}))}catch(e){r(e)}}))}}},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r(738).config();const{main:e}=r(138);try{e()}catch(e){console.log(e.message)}})()})();